# ツインパーソナ（TwinPersona）要件定義書

## 1. プロジェクト概要

### 1.1 アプリケーション名
**ツインパーソナ（TwinPersona）**

### 1.2 プロジェクト目的
- MBTI診断とCharacter Code診断を統合した革新的な性格診断アプリの開発
- 内面の性格と外見の印象のギャップを可視化し、ユーザーの二面性を発見
- SNSでバズる要素を盛り込み、多くのユーザーに利用されるサービスの提供

### 1.3 ターゲットユーザー
- **主要ターゲット**: 10代～40代の男女
- **特に**: 自己分析に興味がある層、SNSでシェアしたい層
- **地域**: 日本（将来的には国際展開も視野）

### 1.4 開発期間・予算
- **フェーズ1（MVP）**: 即座にリリース可能
- **予算**: 無料（GitHub Pages使用）
- **将来拡張**: ユーザー反応を見て判断

## 2. 機能要件

### 2.1 診断機能

#### 2.1.1 MBTI診断
**概要**: 28問の質問による高精度MBTI診断
**詳細**:
- E/I軸: 7問（外向性/内向性）
- S/N軸: 7問（感覚型/直観型）
- T/F軸: 7問（思考型/感情型）
- J/P軸: 7問（判断型/知覚型）
- 各質問は2択形式
- 進捗バー表示
- 質問スキップ不可

#### 2.1.2 Character Code診断
**概要**: 12問の質問による印象分析
**詳細**:
- 印象タイプ: gentle/natural/dynamic/cool の4分類
- 対人関係、表情、ファッション等の多角的質問
- 4択形式の質問
- 顔写真アップロード機能（分析には未使用、将来のAI統合用）

#### 2.1.3 診断フロー
1. 開始画面
2. MBTI診断（28問）
3. Character Code診断（12問）
4. 顔写真アップロード
5. AI生成待機画面（3秒間のモック）
6. 結果表示

### 2.2 分析・結果表示機能

#### 2.2.1 ギャップ分析
**概要**: 内面と外見印象のギャップを数値化・言語化
**出力例**: 
- 「あなたはクールに見えるけど、実は情熱的なアーティスト型で全体の2.1%の希少タイプ」
- 希少性パーセンテージ表示

#### 2.2.2 相性分析
**概要**: MBTI相性理論に基づく相性診断
**分類**:
- 最高の相性: 双対関係（1タイプ）
- 相性が良い: 2タイプ
- 注意が必要: 2タイプ

#### 2.2.3 エンタメスコア（6項目）
- カリスマ度: 20-98%
- 親しみやすさ: 20-98%
- ミステリアス度: 20-98%
- ギャップ度: 20-98%
- 希少度: 20-98%
- モテ度: 20-98%

視覚的プログレスバー付き表示

#### 2.2.4 実用的アドバイス
**3分野別の具体的アドバイス**:
- 仕事: 2-3行の具体的アドバイス
- 友達: 人間関係構築のヒント
- 恋愛: 魅力活用法と注意点

### 2.3 キャラクター生成機能

#### 2.3.1 統一カラーシステム
**MBTIグループ別統一カラー**:
- 分析家（NT）: 紫系（#8B5CF6, #A78BFA, #6D28D9）
- 外交官（NF）: 青緑系（#06B6D4, #67E8F9, #0891B2）
- 番人（SJ）: 緑系（#10B981, #6EE7B7, #059669）
- 探検家（SP）: 黄系（#F59E0B, #FCD34D, #D97706）

#### 2.3.2 SVGキャラクター（現行版）
- 統一カラーパレット適用
- 印象タイプ別の形状・表情差別化
- 背景パターン（circles/leaf/triangle/hexagon）
- 200×200px、SVG形式

#### 2.3.3 AI画像生成（将来版）
**Low Poly 3Dキャラクター仕様**:
- 3頭身統一
- イソメトリック視点
- 150-200ポリゴン
- 1024×1024px
- ソフトアンビエントライティング
- マット仕上げ

### 2.4 シェア・保存機能

#### 2.4.1 シェア機能
**テキストシェア**:
- 診断結果要約
- ギャップ分析文
- ハッシュタグ自動付与（#TwinPersona #ツインパーソナ）

**対応プラットフォーム**:
- ネイティブシェアAPI
- クリップボードコピー

#### 2.4.2 画像生成・ダウンロード
**Canvas API画像生成**:
- 800×800px
- グラデーション背景
- タイトル、ギャップ分析、スコア表示
- PNG形式でダウンロード

## 3. 非機能要件

### 3.1 パフォーマンス要件
- 初期ロード時間: 3秒以内
- 診断完了時間: 8-15分（ユーザー回答時間含む）
- 画像生成時間: 2秒以内（現行SVG）
- レスポンス時間: 1秒以内（ページ遷移）

### 3.2 ユーザビリティ要件
- レスポンシブデザイン（スマートフォン最優先）
- 直感的なUI/UX
- 進捗状況の可視化
- エラー時の適切なフィードバック

### 3.3 互換性要件
**ブラウザサポート**:
- Chrome: 最新版
- Safari: 最新版
- Firefox: 最新版
- Edge: 最新版

**デバイスサポート**:
- iOS Safari: 12.0+
- Android Chrome: 最新版
- デスクトップ: 1024px以上推奨

### 3.4 セキュリティ要件
- HTTPS通信の強制
- 顔写真の非保存（アップロード後即座に破棄）
- 個人情報の収集なし
- プライバシーポリシーの明示

## 4. 技術仕様

### 4.1 フロントエンド
- **フレームワーク**: React 18+ with Vite
- **スタイリング**: TailwindCSS
- **アイコン**: Lucide React
- **状態管理**: React Hooks (useState, useCallback)
- **ビルドツール**: Vite

### 4.2 ホスティング
- **プラットフォーム**: GitHub Pages
- **デプロイ**: gh-pages
- **ドメイン**: username.github.io/twin-persona

### 4.3 データ管理
- **ストレージ**: メモリ内のみ（localStorage使用不可）
- **診断データ**: 静的JSON
- **結果保存**: なし（セッション内のみ）

## 5. データ設計

### 5.1 診断質問データ
```javascript
// MBTI質問（28問）
const mbtiQuestions = [
  {
    question: "質問文",
    options: [
      { text: "選択肢1", type: "E/I/S/N/T/F/J/P" },
      { text: "選択肢2", type: "E/I/S/N/T/F/J/P" }
    ]
  }
];

// Character Code質問（12問）
const characterQuestions = [
  {
    question: "質問文",
    options: [
      { text: "選択肢1", type: "gentle/natural/dynamic/cool" },
      // ...
    ]
  }
];
```

### 5.2 診断結果データ
```javascript
const results = {
  mbti: "ENFP",
  character: "dynamic",
  title: "カリスマ系エンターテイナー",
  mbtiInfo: { name: "広報運動家", description: "..." },
  characterInfo: { name: "ダイナミック系", description: "..." },
  gapAnalysis: {
    statement: "あなたは...",
    rarity_percentage: 1.8
  },
  compatibility: {
    最高の相性: ["ISTJ"],
    相性が良い: ["INFJ", "ENFJ"],
    注意が必要: ["ESTJ", "ISTP"]
  },
  advice: {
    仕事: "具体的アドバイス...",
    友達: "具体的アドバイス...",
    恋愛: "具体的アドバイス..."
  },
  scores: {
    カリスマ度: 85,
    親しみやすさ: 90,
    ミステリアス度: 30,
    ギャップ度: 60,
    希少度: 20,
    モテ度: 88
  }
};
```

## 6. UI/UX設計

### 6.1 デザインシステム
**カラーパレット**: MBTIグループ別統一色
**フォント**: システムフォント（Arial fallback）
**レイアウト**: Mobile-first responsive
**アニメーション**: 最小限（ローディング、プログレスバー）

### 6.2 画面構成
1. **開始画面**: ブランディング、機能説明、開始ボタン
2. **MBTI診断画面**: 質問、選択肢、進捗バー
3. **Character診断画面**: 質問、選択肢、進捗バー
4. **写真アップロード画面**: ファイル選択、注意事項
5. **生成待機画面**: ローディング、プロンプト例
6. **結果画面**: 総合結果、各種分析、アクションボタン

## 7. 開発計画

### 7.1 Phase 1: MVP（即時リリース）
- ✅ 基本診断機能
- ✅ 詳細分析結果
- ✅ SVGキャラクター生成
- ✅ シェア・ダウンロード機能
- ✅ GitHub Pages デプロイ

### 7.2 Phase 2: ユーザーフィードバック後
- 🔄 AI画像生成API統合
- 🔄 ユーザーデータ保存機能
- 🔄 アナリティクス導入
- 🔄 カスタムドメイン

### 7.3 Phase 3: スケール拡張
- 🔄 多言語対応
- 🔄 プレミアム機能
- 🔄 コラボレーション機能
- 🔄 企業向けサービス

## 8. 品質保証

### 8.1 テスト項目
- 診断フロー完走テスト
- 全MBTIタイプ×全印象タイプの結果生成テスト
- レスポンシブデザインテスト
- ブラウザ互換性テスト
- パフォーマンステスト

### 8.2 成功指標（KPI）
- **技術KPI**: ページロード時間 < 3秒、エラー率 < 1%
- **利用KPI**: 診断完了率 > 70%、シェア率 > 30%
- **ビジネスKPI**: 月間アクティブユーザー、バイラル係数

## 9. リスク・制約事項

### 9.1 技術的制約
- GitHub Pagesの制限（サーバーサイド処理不可）
- 帯域幅制限（月100GB）
- ストレージ制限（localStorage使用不可）

### 9.2 リスク
- **競合リスク**: 類似サービスの登場
- **技術リスク**: ブラウザ互換性問題
- **法的リスク**: MBTI商標の取り扱い

### 9.3 対応策
- 迅速なリリースによる先行者利益確保
- 段階的な機能拡張による差別化
- 正式なMBTI診断ではない旨の明記

## 10. 運用・保守

### 10.1 監視項目
- サービス稼働状況
- ユーザーアクセス解析
- エラーログ監視

### 10.2 更新計画
- 診断精度の改善
- 新機能の追加
- UI/UXの改善

---

**文書作成日**: 2025年8月16日  
**作成者**: 開発チーム  
**版数**: v1.0